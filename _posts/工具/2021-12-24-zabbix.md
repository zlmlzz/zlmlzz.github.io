---
layout: post
title: Zabbix
category: 工具
tags: Zabbix
description: zabbix搭建
keywords: Zabbix,监测工具
---
## Zabbix
* 开源监控软件,用来监控和跟踪各种网络服务,服务器和其他网络硬件状态

### 安装Zabbix
* [下载](https://www.zabbix.com/download)
* 安装Zabbix的repository

```
rpm -Uvh https://mirrors.aliyun.com/zabbix/zabbix/5.0/rhel/7/x86_64/zabbix-release-5.0-1.el7.noarch.rpm
yum clean all
sed -i 's#http://repo.zabbix.com#https://mirrors.aliyun.com/zabbix#' /etc/yum.repos.d/zabbix.repo
```
* 安装Zabbix Server和agent`yum install zabbix-server-mysql zabbix-agent`
* 安装Zabbix frontend(Zabbix界面)

```
## 启用Red Hat软件集
yum install centos-release-scl
## 修改/etc/yum.repos.d/zabbix.repo,并启用zabbix-frontend
vim /etc/yum.repos.d/zabbix.repo
[zabbix-frontend]
enabled=1
```
* 安装Zabbix frontend的包`yum install zabbix-web-mysql-scl zabbix-nginx-conf-scl`
* 初始化数据

```
## 创建数据库,用户并授权
create database zabbix character set utf8 collate utf8_bin;
create user zabbix@localhost identified by 'Zabbix@123456';
grant all privileges on zabbix.* to zabbix@localhost;
## 导入表结构与初始化数据
zcat /usr/share/doc/zabbix-server-mysql*/create.sql.gz | mysql -uzabbix -p zabbix
```
* 配置Zabbix Server配置文件
* `vim /etc/zabbix/zabbix_server.conf`(DBPassword=Zabbix@123456)
* 配置nginx,php

```
## nginx配置
vim /etc/opt/rh/rh-nginx116/nginx/conf.d/zabbix.conf
listen 80;
server_name 192.168.150.160;
## php配置
vim /etc/opt/rh/rh-php72/php-fpm.d/zabbix.conf
listen.acl_users = apache,nginx
php_value[date.timezone] = Asia/Shanghai
```
* 启动Zabbix Server与agent,并设置开机自启

```
systemctl restart zabbix-server zabbix-agent rh-nginx116-nginx rh-php72-php-fpm
systemctl enable zabbix-server zabbix-agent rh-nginx116-nginx rh-php72-php-fpm
```
* 访问
