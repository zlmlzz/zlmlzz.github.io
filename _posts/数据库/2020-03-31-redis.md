---
layout: post
title: redis
category: 数据库
tags: redis
keywords: redis;数据库
--- 
## Redis简介  
* Redis-REmote DIctionary Server
* Redis是一个使用ANSI C语言编写的开源数据库
* 高性能的key-value数据库
* 内存数据库,支持数据持久化   

## Redis对象结构
* 数据类型(type)
    * string
    * hash
    * list
    * set
    * sorted set
* 编码方式
    * raw
    * int
    * ht
    * zipmap
    * linkedlist
    * ziplist
    * intset
* 数据指针
* 虚拟内存
* 其它信息

## Redis数据结构
* string
    * setex(并设置过期时间,单位秒)
    * psetex(设置过期时间,单位毫秒)
    * getrange word 0 2(取word键的值的0~2数据)
    * getset(先get后set)
    * mset(设置多个key)
    * mget
    * setnx(只有key不存在才能设置成功)
    * strlen(字符串长度)
    * msetnx(要么都成功,要么都失败;原子性)
    * incr(数字加1)
    * incrby(可自定义步长)
    * decr(数字减1)
    * decrby
    * append(追加)
* hash
    * hset
    * hexists(hash是否存在某个键)
    * hget
    * hgetall
    * hkeys
    * hvals
    * hlen
    * hmget
    * hmset
    * hdel
    * hsetnx
* list(可重复)
    * lpush(放到最前面)
    * llen
    * lrange
    * lset
    * lindex
    * lpop(移除第一个元素)
    * rpop(移除最后一个元素)
* set
    * sadd
    * scard(返回元素数量)
    * smembers(查看所有元素成员)
    * sdiff(差集)
    * sinter(交集)
    * sunion(并集)
    * srandmember(返回指定个数的随机元素)
    * sismember(是否存在元素)
    * srem(移除成员)
    * spop(移除并返回随机元素)
* sortedset(有序集合)
    * zadd
    * zcard
    * zscore(查看元素分数)
    * zcount(返回指定区间分数的元素个数)
    * zrank(返回指定元素索引)
    * zincrby(为指定元素增加指定分数并返回增加完后的分数)
    * zrange(查看索引范围内的元素)

## Redis启动服务方式
* ./redis-server;./redis-cli(默认启动方式,端口6379)
* ./redis-server --port 6380;./redis-cli -p 6380(指定端口启动)
* ./redis-server ../redis.conf(指定配置文件启动)
* ./redis-cli -h 127.0.0.1(连接远程)
* ./redis-cli -a password(密码连接)

## Redis基础命令
* info(查看系统信息)
    * Keyspace(默认db0)
* flushdb(清除当前db)
* flushall(清除所有db)
* dbsize(当前db数量)
* save(redis持久化)

## Redis键命令
* set
* get
* hset(hash)
* keys
* del
* exists
* ttl(查看key剩余生存时间,单位为秒,返回-1则代表没有过期时间,-2代表不存在)
* expire(设置键的过期时间)
* type(查看值的类型)
* randomkey
* rename(重命名)
* 以nx结尾的命令多会先判断

## Redis分布式锁命令
* setnx
* getset
* expire
* del
